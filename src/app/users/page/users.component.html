<ng-container *ngIf="loaded$ | ngrxPush; else loading">
  <ng-container *ngIf="error$ | ngrxPush as error; else userslist">
    <h2 class="error">{{ error }}</h2>
  </ng-container>

  <ng-template class="users" #userslist>
    <users-search [(userName)]="name" />
    <ng-container *ngIf="total$ | ngrxPush as total; else found">
      <p class="total">Total:{{ total }}</p>
      <users-list />
    </ng-container>
    <ng-template #found>NOT FOUND {{ name }}</ng-template>
  </ng-template>
</ng-container>

<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>
